{% extends 'base.html' %}

{% block content %}


<div class='container-fluid'>
    <div class='row row-first'>
    </div>
    <div class='row row-first'>
        <div class="col-xs-offset-3 col-xs-6">
            <h1 id='main-header'>Where do the locals eat?</h1>
        </div>
    </div>
    <div class='row row-first'>
    </div>


    <div class='row row-second' id='main-home-div'
        {% if not session.get('user_id') %} hidden {% endif %}>
    <!-- search for a city which uses Google Places autocomplete -->



        <div id='view-controls' class="col-xs-12 col-lg-12">
            <button class='btn btn-default btn-sm active' id='map-view-btn'>Map View</button>
            <button class='btn btn-default btn-sm' id='list-view-btn'>List View</button>
            <button class='btn btn-default btn-sm' id='search-btn'>Search</button>
        </div>

        <div id='city-div' hidden>
            <ul class='list-unstyled'>
                {% for location in all_locations %}
                    <li data-lat='{{ location.get("lat") }}' data-lng='{{ location.get("lng") }}' data-city='{{ location.get("city").lower() }}' data-state='{{ location.get("state").lower() }}'>
                        <h3 class='city-link'><a href='/cities/{{ location.get("state").lower() }}/{{ location.get("city").lower() }}'>{{ location.get("city").title() }}, {{ location.get("state") }}</a></h3>
                    <!-- <br> -->
                    </li>
                {% endfor %}
            </ul>
        </div>

        <div id='main-map' class="col-xs-12"></div>
        <div id='search-div' class='form-group' hidden>
            <h3>Search for a city</h3>

            <form action='/search-city'>
                <div class='form-group'>
                    <input class='form-control' id='autocomplete' type='text' name='city-name' required>
                </div>
                <div class='form-group'>
                    <button class='btn btn-default' id='search-city' value='Search'>Search</button>
                </div>
            </form>
        </div>
    </div>
    {% if not session.get('user_id') %}
        <div id='icons' class='row'>
            <div class="col-xs-offset-4 col-xs-4">
                <img src='/static/img/donut.png'/>
                <img src='/static/img/fries.png'/>
                <img src='/static/img/hamburger.png'/>
            </div>
        </div>
    {% endif %}
</div>


<script>
    var input = document.getElementById('autocomplete');
    var options = {
        types: ['(cities)']
    };

    autocomplete = new google.maps.places.Autocomplete(input, options);
</script>

<script>
    let idOfOptionToBold = '';
</script>

<script src="/static/js/main-mapstyles.js"></script>
<script src='/static/js/main-map.js'></script>

{% endblock %}
